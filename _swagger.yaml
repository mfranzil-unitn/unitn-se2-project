openapi: 3.0.1
info:
  title: SlackApp
  description: SlackApp is an application that proposes to create a virtual space
    for [slackliners](https://en.wikipedia.org/wiki/Slacklining) where they can share
    their slackline position with other members, along with rating and reviewing them
    on a map.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  version: "v1"
servers:
- url: https://se2-project.herokuapp.com/api/v1/
tags:
- name: line
  description: APIs for creating and retrieving lines
- name: review
  description: APIs for creating and retrieving reviews
- name: users
  description: APIs for retrieving users
- name: auth
  description: APIs for creating new users and authenticating to the system
paths:
  /users:
    get:
      tags:
      - users
      summary: Retrieves one or more users from the system.
      operationId: users
      parameters:
      - name: user_id
        in: query
        description: The userID to query the system with, or a comma-separated value
          of userIDs
        schema:
          type: string
      - name: limit
        in: query
        description: The maximum number of elements to be returned. Required if user_id
          is not present
        schema:
          type: integer
      - name: offset
        in: query
        description: The offset from where to start querying the elements. Required
          if user_id is not present
        schema:
          type: integer
      responses:
        200:
          description: A User object if a single userID was requested, or an array of Users.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/User'
                  - type: array
                    items:
                      $ref: '#/components/schemas/User'
                  
  /signup:
    post:
      tags:
      - auth
      summary: Creates a new user in the system.
      operationId: signup
      parameters:
      - name: user_id
        in: query
        description: The userID to log in with
        required: true
        schema:
          type: string
      - name: user_name
        in: query
        description: The displayed name for the user
        required: true
        schema:
          type: string
      - name: user_password
        in: query
        description: The password matching the userID
        required: true
        schema:
          type: string
      responses:
        201:
          description: User successfully created
          content: {}
        400:
          description: Bad request (invalid number of parameters or content)
          content: {}
  /login:
    post:
      tags:
      - auth
      summary: Authenticates an user using ID and password.
      operationId: login
      parameters:
      - name: user_id
        in: query
        description: The userID to log in with
        required: true
        schema:
          type: string
      - name: user_password
        in: query
        description: The password matching the userID
        required: true
        schema:
          type: string
      responses:
        200:
          description: User successfully logged in
          content: {}
        400:
          description: Non-existant combination of userID and password, or invalid parameters
          content: {}
  /line:
    get:
      tags:
      - line
      summary: Get all lines
      operationId: getAllLines
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Line'
        500:
          description: Error while getting Line
          content: {}
    post:
      tags:
      - line
      summary: Create new geolocalized line
      description: This can only be done by the logged in user.
      operationId: createLine
      parameters:
      - name: line_user_id
        in: query
        description: The userID of the current user
        required: true
        schema:
          type: string
      - name: line_start_lat
        in: query
        description: The latitude of the starting point of the line
        required: true
        schema:
          type: number
      - name: line_start_lon
        in: query
        description: The longitude of the starting point of the line
        required: true
        schema:
          type: number
      - name: line_end_lat
        in: query
        description: The latiude of the ending point of the line
        required: true
        schema:
          type: number
      - name: line_end_lon
        in: query
        description: The longitude of the ending point of the line
        required: true
        schema:
          type: number
      - name: line_name
        in: query
        description: The name of the line
        required: true
        schema:
          type: string
      - name: line_description
        in: query
        description: A description of the line
        required: true
        schema:
          type: string
      responses:
        200:
          description: successful operation
          content: {}
        400:
          description: Wrong line info
          content: {}
  /line/{lineID}:
    get:
      tags:
      - line
      summary: Get line by lineID
      operationId: getLineByID
      parameters:
      - name: lineID
        in: path
        description: The line that needs to be fetched.
        required: true
        schema:
          type: number
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Line'
        400:
          description: Error while getting Line
          content: {}
        404:
          description: Line with provided LineID not found
          content: {}
  /review:
    get:
      tags:
      - review
      summary: Get all reviews
      operationId: getAllReviews
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        500:
          description: Error while getting Review
          content: {}
    post:
      tags:
      - review
      summary: Create new review
      description: Create a new review (this can only be done by the logged in user).
      operationId: createReview
      parameters:
      - name: review_user_id
        in: query
        description: The userID of the current user
        required: true
        schema:
          type: string
      - name: review_line_id
        in: query
        description: The lineID of the line that's going to be reviewed
        required: true
        schema:
          type: number
      - name: review_rating
        in: query
        description: Line's rating
        required: true
        schema:
          type: number
      - name: review_description
        in: query
        description: 'Line''s description '
        required: true
        schema:
          type: string
      responses:
        201:
          description: successful operation, review created
          content: {}
        400:
          description: Wrong review info
          content: {}
  /review/{review_id}:
    get:
      tags:
      - review
      summary: Get review by review_id
      operationId: getReviewByID
      parameters:
      - name: review_id
        in: path
        description: The review that needs to be fetched.
        required: true
        schema:
          type: number
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        400:
          description: Error while getting Review
          content: {}
        404:
          description: Review with provided ReviewID not found
          content: {}
  /retrieve:
    get:
      tags:
        - line
      summary: Retrieve nearby lines
      description: Given latitude and longitude, this function retrieves lines within a certain radius of 0.1 km
      operationId: retrieveline
      parameters:
        - name: selected_latitude
          in: query
          description: The latitude of the point of interest
          required: true
          schema:
            type: number
        - name: selected_longitude
          in: query
          description: The longitude of the point of interest
          required: true
          schema:
            type: number
      responses:
        201:
          description: Successfull operation, retrieving nearby lines...
        400:
          description: Wrong request

components:
  schemas:
    User:
      type: object
      properties:
        user_id:
          type: string
        user_name:
          type: string
        user_rank:
          type: integer
          format: int64
    Line:
      type: object
      properties:
        line_id:
          type: integer
          format: int64
        line_user_id:
          type: string
        line_start_lat:
          type: number
          format: float
        line_start_lon:
          type: number
          format: float
        line_end_lat:
          type: number
          format: float
        line_end_lon:
          type: number
          format: float
        line_name:
          type: string
        line_description:
          type: string
    Review:
      type: object
      properties:
        review_id:
          type: integer
          format: int64
        review_user_id:
          type: string
        review_line_id:
          type: integer
          format: int64
        review_rating:
          type: integer
          format: int64
        review_description:
          type: string